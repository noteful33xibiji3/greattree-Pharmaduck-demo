<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pharma.Duck ç³»çµ±ç®¡ç†å¾Œå°</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; background-color: #1f2937; color: white; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: #374151; padding: 20px; border-radius: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        
        h1 { border-bottom: 2px solid #F39800; padding-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .reset-btn { background: #d0021b; color: white; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer; font-size: 14px; }

        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #4b5563; }
        th { color: #F39800; }
        
        input { background: #1f2937; border: 1px solid #6b7280; color: white; padding: 8px; border-radius: 5px; width: 100%; box-sizing: border-box; }
        input:focus { border-color: #F39800; outline: none; }
        
        .preview-img { width: 40px; height: 40px; object-fit: contain; background: white; border-radius: 50%; }

        .action-bar { margin-top: 30px; text-align: right; }
        .save-btn { background: #009944; color: white; border: none; padding: 15px 40px; border-radius: 30px; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .save-btn:hover { transform: scale(1.05); background: #00b350; }

        .status-msg { color: #10b981; margin-right: 15px; display: none; }
    </style>
</head>
<body>

<div class="container">
    <h1>
        ğŸ¦† é´¨é´¨é¤Šæˆç³»çµ± - ç­‰ç´šé…ç½®å¾Œå°
        <button class="reset-btn" onclick="resetToDefault()">âš  é‡ç½®ç‚ºé è¨­å€¼</button>
    </h1>
    <p style="color:#9ca3af;">åœ¨æ­¤èª¿æ•´æ¯å€‹ç­‰ç´šçš„ç¨±è™Ÿã€æ‰€éœ€ç¶“é©—å€¼ (EXP) ä»¥åŠå°æ‡‰çš„åœ–ç‰‡ã€‚ä¿®æ”¹å¾Œé»æ“Šä¿å­˜ï¼Œå‰å°å°‡å³æ™‚ç”Ÿæ•ˆã€‚</p>

    <table>
        <thead>
            <tr>
                <th width="80">ç­‰ç´š</th>
                <th width="200">ç¨±è™Ÿåç¨±</th>
                <th width="150">æ‰€éœ€ EXP</th>
                <th>å°æ‡‰åœ–ç‰‡è·¯å¾‘ (images/...)</th>
                <th width="60">é è¦½</th>
            </tr>
        </thead>
        <tbody id="configTable">
            </tbody>
    </table>

    <div class="action-bar">
        <span class="status-msg" id="msg">âœ… è¨­å®šå·²æ›´æ–°ï¼è«‹é‡æ–°æ•´ç†å‰å°ç¶²é </span>
        <button class="save-btn" onclick="saveConfig()">ğŸ’¾ ä¿å­˜è¨­å®š</button>
    </div>
</div>

<script>
    // é è¨­è¨­å®š (å‚™ä»½ç”¨)
    const defaultConfig = [
        { lv: 1, name: "ç ´æ®¼è¦‹ç¿’ç”Ÿ", minExp: 0, img: "images/duck_lv1.png" },
        { lv: 2, name: "å¥½å¥‡æ¢éšªé´¨", minExp: 500, img: "images/duck_lv2.png" },
        { lv: 3, name: "å¥åº·å°å¹«æ‰‹", minExp: 3000, img: "images/duck_lv3.png" },
        { lv: 4, name: "åˆéšæŠ«è¢é´¨", minExp: 10000, img: "images/duck_lv4.png" },
        { lv: 5, name: "èª¿åŠ‘ç†Ÿæ‰‹é´¨", minExp: 25000, img: "images/duck_lv5.png" },
        { lv: 6, name: "è¡›æ•™é ˜èˆªå“¡", minExp: 50000, img: "images/duck_lv6.png" },
        { lv: 7, name: "è³‡æ·±è—¥å¸«é´¨", minExp: 100000, img: "images/duck_lv7.png" },
        { lv: 8, name: "å¤§æ¨¹åº—é•·é´¨", minExp: 250000, img: "images/duck_lv8.png" },
        { lv: 9, name: "æ¦®è­½é•·è€é´¨", minExp: 500000, img: "images/duck_lv9.png" },
        { lv: 10, name: "é†«è—¥å®ˆè­·ç¥", minExp: 1000000, img: "images/duck_lv10.png" }
    ];

    let currentConfig = [];

    // åˆå§‹åŒ–
    function init() {
        // å…ˆçœ‹æœ‰æ²’æœ‰è‡ªè¨‚éï¼Œæ²’æœ‰å°±ç”¨é è¨­
        const saved = localStorage.getItem('customLevelConfig');
        currentConfig = saved ? JSON.parse(saved) : JSON.parse(JSON.stringify(defaultConfig));
        renderTable();
    }

    function renderTable() {
        const tbody = document.getElementById('configTable');
        tbody.innerHTML = '';

        currentConfig.forEach((item, index) => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td style="font-weight:bold; font-size:18px;">Lv.${item.lv}</td>
                <td><input type="text" value="${item.name}" onchange="updateItem(${index}, 'name', this.value)"></td>
                <td><input type="number" value="${item.minExp}" onchange="updateItem(${index}, 'minExp', this.value)"></td>
                <td><input type="text" value="${item.img}" onchange="updateItem(${index}, 'img', this.value)"></td>
                <td><img src="${item.img}" class="preview-img" onerror="this.src='images/my_duck.png'"></td>
            `;
            tbody.appendChild(tr);
        });
    }

    function updateItem(index, field, value) {
        if (field === 'minExp') value = parseInt(value);
        currentConfig[index][field] = value;
    }

    function saveConfig() {
        localStorage.setItem('customLevelConfig', JSON.stringify(currentConfig));
        
        // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
        const msg = document.getElementById('msg');
        msg.style.display = 'inline-block';
        setTimeout(() => msg.style.display = 'none', 3000);
    }

    function resetToDefault() {
        if(confirm("ç¢ºå®šè¦æ¢å¾©åŸå» è¨­å®šå—ï¼Ÿæ‰€æœ‰è‡ªè¨‚ä¿®æ”¹å°‡æ¶ˆå¤±ã€‚")) {
            localStorage.removeItem('customLevelConfig');
            init(); // é‡æ–°è®€å–é è¨­
            alert("å·²æ¢å¾©é è¨­å€¼ï¼");
        }
    }

    init();
</script>

</body>
</html>
