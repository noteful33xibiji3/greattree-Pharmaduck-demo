<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœƒå“¡ç™»å…¥ - å¤§æ¨¹ä¸€é´¨treeåƒ</title>
    <style>
        /* === å¤§æ¨¹è—¥å±€æ¨™æº–é…è‰² === */
        :root {
            --gt-green: #009944; 
            --gt-orange: #F39800; 
            --bg-gray: #f4f6f8;
        }
        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-gray);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .login-container {
            background: white;
            width: 100%;
            max-width: 400px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            overflow: hidden;
            padding: 30px 25px;
            box-sizing: border-box;
        }
        .logo-area {
            text-align: center;
            margin-bottom: 25px;
        }
        .logo-area img {
            height: 60px;
            margin-bottom: 10px;
        }
        .app-title {
            color: var(--gt-green);
            font-size: 24px;
            font-weight: 900;
            margin: 0;
            letter-spacing: 1px;
        }
        
        /* === é ç±¤åˆ‡æ› (ç™»å…¥/è¨»å†Š) === */
        .tab-container {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 2px solid #eee;
        }
        .tab {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            cursor: pointer;
            font-weight: bold;
            color: #888;
            transition: 0.3s;
        }
        .tab.active {
            color: var(--gt-green);
            border-bottom: 3px solid var(--gt-green);
        }

        /* === è¡¨å–®å€åŸŸ === */
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #444;
            font-size: 14px;
            font-weight: bold;
        }
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 16px;
            transition: 0.3s;
            background-color: #f9f9f9;
        }
        .form-group input:focus {
            background-color: #fff;
            border-color: var(--gt-green);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 153, 68, 0.1);
        }

        /* === æŒ‰éˆ• === */
        .btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        .btn-login { background-color: var(--gt-green); }
        .btn-login:hover { background-color: #008038; }
        
        .btn-register { background-color: var(--gt-orange); }
        .btn-register:hover { background-color: #e08b00; }

        /* å‹•ç•«åˆ‡æ›æ•ˆæœ */
        .form-box { display: none; }
        .form-box.active { display: block; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .hint-text { text-align: center; font-size: 13px; color: #888; margin-top: 20px; line-height: 1.5; }
    </style>
</head>
<body>

<div class="login-container">
    <div class="logo-area">
        <img src="images/logo.png" alt="å¤§æ¨¹è—¥å±€ Logo" onerror="this.src='https://placehold.co/200x60/009944/ffffff?text=Great+Tree+Logo'">
        <h1 class="app-title">å¤§æ¨¹ä¸€é´¨treeåƒ</h1>
        <p style="color:#666; font-size:13px; margin-top:5px;">æœƒå“¡ä¸­å¿ƒæš¨ç·šä¸Šå•†åŸ</p>
    </div>

    <div class="tab-container">
        <div class="tab active" onclick="switchTab('login')">æœƒå“¡ç™»å…¥</div>
        <div class="tab" onclick="switchTab('register')">è¨»å†Šæ–°å¸³è™Ÿ</div>
    </div>

    <div id="loginForm" class="form-box active">
        <div class="form-group">
            <label>Gmail ä¿¡ç®± (å¸³è™Ÿ)</label>
            <input type="email" id="loginEmail" placeholder="è«‹è¼¸å…¥ Gmail ä¿¡ç®±">
        </div>
        <div class="form-group">
            <label>æœƒå“¡å¯†ç¢¼</label>
            <input type="password" id="loginPwd" placeholder="è«‹è¼¸å…¥å¯†ç¢¼">
        </div>
        <button class="btn btn-login" onclick="doLogin()">ç™»å…¥</button>
        <div class="hint-text">
            ğŸŒŸ <b>è©•å¯©æ¸¬è©¦å¸³è™Ÿ</b><br>
            å¸³è™Ÿï¼štest@gmail.com<br>å¯†ç¢¼ï¼š1234
        </div>
    </div>

    <div id="registerForm" class="form-box">
        <div class="form-group">
            <label>Gmail ä¿¡ç®± (ä½œç‚ºç™»å…¥å¸³è™Ÿ)</label>
            <input type="email" id="regEmail" placeholder="è«‹è¼¸å…¥æ‚¨çš„ Gmail ä¿¡ç®±">
        </div>
        <div class="form-group">
            <label>è¨­å®šå¯†ç¢¼</label>
            <input type="password" id="regPwd" placeholder="è«‹è¨­å®š 4 ç¢¼ä»¥ä¸Šå¯†ç¢¼">
        </div>
        <button class="btn btn-register" onclick="doRegister()">ç«‹å³è¨»å†Š</button>
        <div class="hint-text" style="color: var(--gt-orange);">
            ğŸ¦† <b>è¨»å†Šå¤§ç¦®åŒ…</b><br>è¨»å†ŠæˆåŠŸå³äº« 50 æšå¤§æ¨¹å¹£èˆ‡æ–°æ‰‹é´¨é´¨ï¼
        </div>
    </div>
</div>

    <footer style="text-align: center; padding: 40px 20px; border-top: 1px solid #eee; background: #fff; margin-top: 50px;">
    <div style="font-size: 18px; font-weight: bold; color: #F39800; margin-bottom: 5px;">
        åœ˜éšŠï¼šä¸€é´¨treeåƒ ğŸ¦†
    </div>
    <div style="font-size: 14px; color: #333; margin-bottom: 10px;">
        å˜‰å—è—¥ç†å¤§å­¸ è—¥å­¸ç³» | ç¬¬ä¸‰å±†å¤§æ¨¹è—¥å±€å‰µæ„ç«¶è³½
    </div>
    <div style="font-size: 11px; color: #888; line-height: 1.6;">
        âœ¨ **Pharma.Duck IP å½¢è±¡ç”±åœ˜éšŠè¦ªè‡ªæ‰‹ç¹ªæ ¸å¿ƒæ¨¡æ¿ï¼Œä¸¦èˆ‡ Gemini AI å”ä½œæ¼”åŒ–è€Œæˆã€‚**<br>
        æœ¬ç¶²é å…§å®¹èˆ‡ IP å½¢è±¡åƒ…ä¾›ç«¶è³½å±•ç¤ºä½¿ç”¨ï¼ŒéçœŸå¯¦ç‡Ÿé‹ç¶²ç«™ã€‚<br>
        Copyright Â© 2026 Pharma.Duck. All rights reserved.
    </div>
</footer>
<script>
    // === è™›æ“¬è³‡æ–™åº«åˆå§‹åŒ– ===
    let usersDB = JSON.parse(localStorage.getItem('greatTreeUsersDB')) || {};

    // â˜… ä¿®æ”¹ï¼šæŠŠé è¨­æ¸¬è©¦å¸³è™Ÿæ”¹æˆ Gmail æ ¼å¼ â˜…
    if (!usersDB['test@gmail.com']) {
        usersDB['test@gmail.com'] = { password: '1234', data: null };
        localStorage.setItem('greatTreeUsersDB', JSON.stringify(usersDB));
    }

    // === ä»‹é¢åˆ‡æ›åŠŸèƒ½ ===
    function switchTab(type) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.form-box').forEach(f => f.classList.remove('active'));
        
        if (type === 'login') {
            document.querySelectorAll('.tab')[0].classList.add('active');
            document.getElementById('loginForm').classList.add('active');
        } else {
            document.querySelectorAll('.tab')[1].classList.add('active');
            document.getElementById('registerForm').classList.add('active');
        }
    }

    // === è¨»å†ŠåŠŸèƒ½ ===
    function doRegister() {
        // â˜… ä¿®æ”¹ï¼šæŠ“å– email æ¬„ä½çš„å€¼ â˜…
        const email = document.getElementById('regEmail').value.trim().toLowerCase();
        const pwd = document.getElementById('regPwd').value.trim();

        // â˜… ä¿®æ”¹ï¼šé˜²å‘†æª¢æŸ¥æ”¹æˆ Email æ ¼å¼ (å¿…é ˆåŒ…å« @ å’Œ .) â˜…
        if (!email.includes('@') || !email.includes('.')) {
            return alert("âŒ è«‹è¼¸å…¥æ­£ç¢ºçš„ Email ä¿¡ç®±æ ¼å¼ï¼");
        }
        if (pwd.length < 4) return alert("âŒ å¯†ç¢¼è«‹è‡³å°‘è¼¸å…¥ 4 ç¢¼ï¼");
        if (usersDB[email]) return alert("âš ï¸ æ­¤ä¿¡ç®±å·²ç¶“è¨»å†Šéå›‰ï¼è«‹ç›´æ¥ç™»å…¥ã€‚");

        // å»ºç«‹æ–°å¸³è™Ÿä¸¦å­˜å…¥è™›æ“¬è³‡æ–™åº«
        usersDB[email] = { password: pwd, data: null };
        localStorage.setItem('greatTreeUsersDB', JSON.stringify(usersDB));
        
        alert("ğŸ‰ è¨»å†ŠæˆåŠŸï¼ç³»çµ±å°‡ç‚ºæ‚¨è‡ªå‹•ç™»å…¥ã€‚");
        
        // è¨­å®šç•¶å‰ç™»å…¥è€…
        localStorage.setItem('currentLoggedInUser', email);
        localStorage.removeItem('duckUser'); 
        
        // è·³è½‰åˆ°é¤Šæˆä¸­å¿ƒ
        window.location.href = 'member.html';
    }

    // === ç™»å…¥åŠŸèƒ½ ===
    function doLogin() {
        // â˜… ä¿®æ”¹ï¼šæŠ“å– email æ¬„ä½çš„å€¼ â˜…
        const email = document.getElementById('loginEmail').value.trim().toLowerCase();
        const pwd = document.getElementById('loginPwd').value.trim();

        // æª¢æŸ¥å¸³è™Ÿå¯†ç¢¼
        if (!usersDB[email]) {
            return alert("âŒ æ‰¾ä¸åˆ°æ­¤å¸³è™Ÿï¼Œè«‹å…ˆåˆ‡æ›åˆ°å³é‚Šã€Œè¨»å†Šæ–°å¸³è™Ÿã€ï¼");
        }
        if (usersDB[email].password !== pwd) {
            return alert("âŒ å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹å†è©¦ä¸€æ¬¡ï¼");
        }

        // ç™»å…¥æˆåŠŸï¼Œè¨˜éŒ„ç•¶å‰ä½¿ç”¨è€…
        localStorage.setItem('currentLoggedInUser', email);
        
        // è®€å–è©²ä½¿ç”¨è€…çš„å°ˆå±¬é€²åº¦
        if (usersDB[email].data) {
            localStorage.setItem('duckUser', JSON.stringify(usersDB[email].data));
        } else {
            localStorage.removeItem('duckUser');
        }

        // è·³è½‰åˆ°é¤Šæˆä¸­å¿ƒ
        window.location.href = 'member.html';
    }
</script>

</body>
</html>
