<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯é€±è¡›æ•™æŒ‘æˆ° - Pharma.Duck</title>
    <style>
        /* === ç¹¼æ‰¿å¤§æ¨¹é¢¨æ ¼ === */
        :root { --gt-green: #009944; --gt-orange: #F39800; --bg-gray: #f0f2f5; --gold: #FFD700; }
        body { font-family: "Microsoft JhengHei", sans-serif; background-color: var(--bg-gray); margin: 0; padding-bottom: 50px; }
        
        /* Header */
        header { background: white; padding: 15px 0; border-bottom: 4px solid var(--gt-green); box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        .nav-container { max-width: 800px; margin: 0 auto; display: flex; align-items: center; padding: 0 20px; }
        .back-btn { text-decoration: none; color: #555; font-weight: bold; display: flex; align-items: center; gap: 5px; font-size: 16px; }
        .page-title { flex: 1; text-align: center; font-size: 18px; font-weight: bold; color: var(--gt-green); margin-right: 30px; } /* margin-right å¹³è¡¡å·¦é‚ŠæŒ‰éˆ•å¯¬åº¦ */

        /* ä¸»è¦å®¹å™¨ */
        .container { max-width: 800px; margin: 30px auto; padding: 0 20px; }

        /* å¡ç‰‡æ¨£å¼ */
        .card { background: white; border-radius: 20px; padding: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); text-align: center; margin-bottom: 20px; }
        .duck-img { width: 120px; margin-bottom: 15px; }
        
        /* ç‹€æ…‹æ–‡å­— */
        h1 { margin: 10px 0; color: #333; }
        .subtitle { color: #666; font-size: 14px; line-height: 1.6; margin-bottom: 20px; }
        .reward-badge { background: #fffbe6; border: 1px solid var(--gold); color: #b7791f; padding: 5px 15px; border-radius: 20px; font-weight: bold; display: inline-block; margin-bottom: 20px; }

        /* å•å·å€åŸŸ */
        .quiz-container { text-align: left; display: none; } /* é è¨­éš±è—ï¼Œç”± JS æ§åˆ¶é¡¯ç¤º */
        .question-block { margin-bottom: 25px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        .q-title { font-weight: bold; font-size: 16px; margin-bottom: 10px; color: var(--gt-green); }
        .options label { display: block; padding: 10px; border: 2px solid #eee; border-radius: 10px; margin-bottom: 8px; cursor: pointer; transition: 0.2s; }
        .options input { margin-right: 10px; }
        .options label:hover { background: #f9f9f9; border-color: #ddd; }
        /* é¸ä¸­æ¨£å¼ */
        .options input:checked + span { font-weight: bold; color: var(--gt-green); }
        .options input:checked + span::after { content: " âœ”"; }

        /* æŒ‰éˆ• */
        .btn-main { background: var(--gt-green); color: white; border: none; padding: 12px 40px; border-radius: 25px; font-size: 16px; font-weight: bold; cursor: pointer; width: 100%; max-width: 300px; transition: 0.2s; }
        .btn-main:hover { background: #007a36; transform: translateY(-2px); }
        .btn-disabled { background: #ccc; cursor: not-allowed; }

        /* çµæœç•«é¢ */
        .result-screen { display: none; }
        .success-icon { font-size: 60px; color: var(--gt-green); margin-bottom: 10px; }
    </style>
</head>
<body>

<header>
    <div class="nav-container">
        <a href="member.html" class="back-btn">
            <span>â€¹</span> è¿”å›æœƒå“¡ä¸­å¿ƒ
        </a>
        <div class="page-title">ğŸ“ æ¯é€±è¡›æ•™æŒ‘æˆ°</div>
    </div>
</header>

<div class="container">
    
    <div class="card" id="welcomeScreen">
        <img src="images/my_duck.png" class="duck-avatar" style="width:100px; border-radius:50%; border:3px solid var(--gt-orange);">
        <h1>Pharma.Duck çŸ¥è­˜å°å­¸å ‚</h1>
        <div class="reward-badge">æœ¬é€±çå‹µï¼š+200 EXP | +10 Coins</div>
        <p class="subtitle">
            æ¯é€±ä¸€æ¬¡ï¼Œå›ç­” 5 é¡Œç°¡å–®çš„è—¥å­¸å°çŸ¥è­˜ï¼Œ<br>
            ä¸åƒ…èƒ½ç…§é¡§è‡ªå·±èˆ‡å®¶äººçš„å¥åº·ï¼Œé‚„èƒ½ç²å¾—è±å¯Œçå‹µå–”ï¼
        </p>
        <button class="btn-main" onclick="startQuiz()">é–‹å§‹æŒ‘æˆ°</button>
    </div>

    <div class="card" id="cooldownScreen" style="display:none;">
        <div style="font-size: 50px;">â³</div>
        <h2 style="color: #666;">æœ¬é€±æŒ‘æˆ°å·²å®Œæˆ</h2>
        <p class="subtitle">
            æ‚¨å·²ç¶“é ˜å–éæœ¬é€±çš„çå‹µå›‰ï¼<br>
            è«‹ä¸‹é€±å†ä¾†æŒ‘æˆ°æ–°çš„è¡›æ•™çŸ¥è­˜ã€‚
        </p>
        <div style="background:#eee; padding:10px; border-radius:10px; margin:20px 0; color:#555;">
            ä¸‹æ¬¡é‡ç½®æ™‚é–“ï¼š<br><b>ä¸‹é€±ä¸€ 00:00</b>
        </div>
        <a href="member.html"><button class="btn-main">è¿”å›é¦–é </button></a>
    </div>

    <div class="card quiz-container" id="quizForm">
        
        <div class="question-block">
            <div class="q-title">Q1. é†«ç”Ÿé–‹çš„ã€ŒæŠ—ç”Ÿç´ ã€ï¼Œç—‡ç‹€å¥½è½‰å¾Œå¯ä»¥è‡ªè¡Œåœè—¥å—ï¼Ÿ</div>
            <div class="options">
                <label><input type="radio" name="q1" value="wrong"> <span>è¦ºå¾—å¥½äº†å°±å¯ä»¥åœï¼Œä¸æƒ³åƒå¤ªå¤šè—¥</span></label>
                <label><input type="radio" name="q1" value="correct"> <span>ä¸è¡Œï¼Œå¿…é ˆæŠŠæ•´å€‹ç™‚ç¨‹åƒå®Œï¼Œä»¥å…ç”¢ç”ŸæŠ—è—¥æ€§</span></label>
                <label><input type="radio" name="q1" value="wrong"> <span>ç•™è‘—ä¸‹æ¬¡æ„Ÿå†’å†åƒ</span></label>
            </div>
        </div>

        <div class="question-block">
            <div class="q-title">Q2. ä¸€èˆ¬è—¥å“æœ€å¥½çš„ä¿å­˜ç’°å¢ƒæ˜¯ï¼Ÿ</div>
            <div class="options">
                <label><input type="radio" name="q2" value="wrong"> <span>å…¨éƒ¨æ”¾å†°ç®±æœ€ä¿é®®</span></label>
                <label><input type="radio" name="q2" value="correct"> <span>é¿å…‰ã€é¿ç†±ã€é¿æ¿•çš„å®¤å…§é™°æ¶¼è™•</span></label>
                <label><input type="radio" name="q2" value="wrong"> <span>æ”¾åœ¨çª—æˆ¶æ—æ›¬å¤ªé™½æ®ºèŒ</span></label>
            </div>
        </div>

        <div class="question-block">
            <div class="q-title">Q3. Bç¾¤ä¸»è¦çš„åŠŸèƒ½æ˜¯ä»€éº¼ï¼Ÿ</div>
            <div class="options">
                <label><input type="radio" name="q3" value="correct"> <span>å¹«åŠ©ç‡Ÿé¤Šä»£è¬è½‰æ›æˆèƒ½é‡ (è¼”åŠ©é…µç´ )</span></label>
                <label><input type="radio" name="q3" value="wrong"> <span>åƒæ˜¯å’–å•¡å› ä¸€æ¨£ç›´æ¥æç¥</span></label>
                <label><input type="radio" name="q3" value="wrong"> <span>æ²»ç™¾ç—…çš„ç¥è—¥</span></label>
            </div>
        </div>

        <div class="question-block">
            <div class="q-title">Q4. å¦‚æœå¿˜è¨˜åƒè—¥ï¼Œæƒ³èµ·ä¾†çš„æ™‚å€™è©²è£œåƒå—ï¼Ÿ</div>
            <div class="options">
                <label><input type="radio" name="q4" value="correct"> <span>è‹¥æ™‚é–“æ¥è¿‘ä¸‹ä¸€æ¬¡åƒè—¥æ™‚é–“ï¼Œå°±è·³éä¸€æ¬¡ (ä¸å¯åƒå…©å€é‡)</span></label>
                <label><input type="radio" name="q4" value="wrong"> <span>è¶•å¿«è£œåƒï¼Œç„¶å¾Œä¸‹æ¬¡æ™‚é–“åˆ°å†åƒä¸€æ¬¡</span></label>
                <label><input type="radio" name="q4" value="wrong"> <span>ä¸€æ¬¡åƒå…©åŒ…è£œå›ä¾†</span></label>
            </div>
        </div>

        <div class="question-block">
            <div class="q-title">Q5. è³¼è²·ä¿å¥é£Ÿå“å‰ï¼Œæœ€å¥½çš„è«®è©¢å°è±¡æ˜¯ï¼Ÿ</div>
            <div class="options">
                <label><input type="radio" name="q5" value="wrong"> <span>éš”å£é„°å±…é˜¿å§¨</span></label>
                <label><input type="radio" name="q5" value="wrong"> <span>ç¶²è·¯ä¸Šçš„ä¸çŸ¥åå»£å‘Š</span></label>
                <label><input type="radio" name="q5" value="correct"> <span>å°ˆæ¥­é†«å¸«æˆ–è—¥å¸« (æ‰¾é´¨é´¨è—¥å¸«ä¹Ÿå¯ä»¥ï¼)</span></label>
            </div>
        </div>

        <button class="btn-main" onclick="submitQuiz()">æäº¤ç­”æ¡ˆ & é ˜ç</button>
    </div>

    <div class="card result-screen" id="resultScreen">
        <div class="success-icon">ğŸ‰</div>
        <h2 style="color:var(--gt-green);">æŒ‘æˆ°æˆåŠŸï¼</h2>
        <p class="subtitle">
            æ­å–œæ‚¨å®Œæˆæœ¬é€±è¡›æ•™å®£å°ï¼<br>
            æ‚¨çš„å¥åº·çŸ¥è­˜åˆå¢åŠ äº†ï¼Œçå‹µå·²ç™¼é€ã€‚
        </p>
        <div style="margin: 20px 0;">
            <div class="reward-badge" style="background:#e6f4ea; border:none; font-size:18px;">EXP +200</div>
            <div class="reward-badge" style="background:#fffbe6; border:none; font-size:18px;">Coins +10</div>
        </div>
        <a href="member.html"><button class="btn-main">å›æœƒå“¡ä¸­å¿ƒæŸ¥çœ‹</button></a>
    </div>

</div>

<script>
    // === 1. åˆå§‹åŒ–æª¢æŸ¥ (æ¯é€±é™åˆ¶é‚è¼¯) ===
    const QUIZ_COOLDOWN_DAYS = 7;
    const REWARD_EXP = 200;
    const REWARD_COINS = 10;

    function checkAvailability() {
        const lastDateStr = localStorage.getItem('duckQuizLastDate');
        
        if (lastDateStr) {
            const lastDate = new Date(parseInt(lastDateStr));
            const now = new Date();
            const diffTime = Math.abs(now - lastDate);
            const diffDays = diffTime / (1000 * 60 * 60 * 24);

            if (diffDays < QUIZ_COOLDOWN_DAYS) {
                // é‚„åœ¨å†·å»ä¸­
                document.getElementById('welcomeScreen').style.display = 'none';
                document.getElementById('cooldownScreen').style.display = 'block';
                return false;
            }
        }
        return true;
    }

    // é é¢è¼‰å…¥æ™‚åŸ·è¡Œæª¢æŸ¥
    checkAvailability();

    // === 2. é–‹å§‹æ¸¬é©— ===
    function startQuiz() {
        document.getElementById('welcomeScreen').style.display = 'none';
        document.getElementById('quizForm').style.display = 'block';
        window.scrollTo(0, 0); // æ²å‹•åˆ°é ‚éƒ¨
    }

    // === 3. æäº¤èˆ‡é ˜ç ===
    function submitQuiz() {
        // ç°¡å–®æª¢æŸ¥æ˜¯å¦éƒ½æœ‰å¡«å¯« (é€™è£¡ç°¡åŒ–ï¼Œå‡è¨­éƒ½å¡«äº†)
        // å¯¦éš›å¯ä»¥åŠ  Loop æª¢æŸ¥ checked
        
        // 1. ç™¼æ”¾çå‹µ
        let userState = JSON.parse(localStorage.getItem('duckUser')) || { level: 1, exp: 0, coins: 0 };
        
        userState.exp += REWARD_EXP;
        userState.coins += REWARD_COINS;
        
        // 2. å­˜æª”æœƒå“¡æ•¸æ“š
        localStorage.setItem('duckUser', JSON.stringify(userState));

        // 3. è¨˜éŒ„æœ¬æ¬¡æ¸¬é©—æ™‚é–“ (é–‹å§‹å†·å»)
        localStorage.setItem('duckQuizLastDate', Date.now().toString());

        // 4. é¡¯ç¤ºçµæœ
        document.getElementById('quizForm').style.display = 'none';
        document.getElementById('resultScreen').style.display = 'block';
        window.scrollTo(0, 0);
    }
</script>

</body>
</html>
